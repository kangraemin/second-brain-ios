# Worklog: Stash — 2026-02-21

---

## 12:09 ~ 14:57 — 프로젝트 문서 작성

### 요청사항
- 프로젝트 개발 가이드 및 참조 문서 작성

### 작업 내용
- DEVELOPMENT_GUIDE.md 허브 문서 생성 (아키텍처, DI, 컨벤션 참조)
- docs/ARCHITECTURE.md — TCA 기반 아키텍처 설계
- docs/CODING_CONVENTIONS.md — 코딩 컨벤션 정의
- docs/SWIFTUI_GUIDE.md — SwiftUI 가이드
- docs/TESTING.md — 테스트 전략 및 규칙
- docs/UX_GUIDE.md — UX 가이드
- docs/PHASES.md — 6단계 Phase 계획 수립
- 초안 작성 후 여러 차례 리팩토링/간소화

### 변경 통계
```
 DEVELOPMENT_GUIDE.md       | 여러 차례 수정
 docs/ARCHITECTURE.md       | 200+ lines
 docs/CODING_CONVENTIONS.md | 205+ lines
 docs/SWIFTUI_GUIDE.md      | 168+ lines
 docs/TESTING.md            | 167+ lines
 docs/UX_GUIDE.md           | 208+ lines
 docs/PHASES.md             | 321+ lines
```

---

## 15:07 ~ 15:12 — Xcode 14 프로젝트 생성/삭제 (실패)

### 요청사항
- Phase 0 Step 0.2: iOS App 프로젝트 생성

### 작업 내용
- Xcode 14.3.1로 프로젝트 생성했으나 Xcode 15+ 필요하여 삭제
- README.md 추가
- 이후 Xcode 26.2로 업그레이드 후 재시작

---

## 17:29 — Phase 0 Step 0.2: iOS App 프로젝트 생성

### 요청사항
- Xcode 26.2로 iOS App 프로젝트 재생성

### 작업 내용
- SwiftUI 기반 iOS 17+ 프로젝트 생성 (번들 ID: com.kangraemin.stash)
- project.pbxproj, xcscheme, Assets, StashApp.swift, ContentView.swift, StashTests 생성

### 변경 통계
```
 8 files changed, 615 insertions(+)
```

---

## 17:45 — Phase 0 Step 0.3: SPM 의존성 추가

### 요청사항
- swift-composable-architecture(TCA) SPM 패키지 추가

### 작업 내용
- TCA 1.23.2 의존성 추가, Package.resolved 생성
- import ComposableArchitecture 컴파일 확인

### 변경 통계
```
 Stash.xcodeproj/project.pbxproj           |  37 ++++++
 .../swiftpm/Package.resolved              | 132 +++++++++++++++++++++
 Stash/ContentView.swift                   |  17 ---
 3 files changed, 169 insertions(+), 17 deletions(-)
```

---

## 17:46 — Phase 0 Step 0.4: 폴더 구조 생성

### 요청사항
- ARCHITECTURE.md 기준 폴더 구조 생성

### 작업 내용
- App/, Data/(Clients, Mappers, SwiftData), Domain/(ContentParsing, Models, Services), Features/(Home, Detail, Search, Settings, CategoryList), ML/(EmbeddingService, VectorSearch), Resources/, Shared/AppGroup/ 폴더 생성
- StashApp.swift를 App/ 하위로 이동

### 변경 통계
```
 17 files changed, 18 insertions(+)
```

---

## 17:48 ~ 17:49 — Phase 0 Step 0.5: App Group capability 추가

### 요청사항
- 메인 앱 타겟에 App Group `group.com.kangraemin.stash` 추가

### 작업 내용
- Stash.entitlements 파일 생성 (App Group 설정)
- pbxproj에 폴더 그룹 구조, entitlements 연결, 빌드 설정 반영

### 변경 통계
```
 Stash/Stash.entitlements               | 10 ++++++++++
 Stash.xcodeproj/project.pbxproj        | 174+ lines changed
```

---

## 17:56 — Phase 0 Step 0.6: Share Extension 타겟 생성

### 요청사항
- StashShareExtension 타겟 추가 및 App Group 연결

### 작업 내용
- ShareViewController.swift, Info.plist, StashShareExtension.entitlements 생성
- 메인 앱 + Extension 두 타겟 모두 빌드 성공

### 변경 통계
```
 Stash.xcodeproj/project.pbxproj           | 152 +++++++++++++++++++++
 StashShareExtension/Info.plist            |  18 +++
 StashShareExtension/ShareViewController   |  31 +++++
 StashShareExtension.entitlements          |  10 ++
 4 files changed, 211 insertions(+)
```

---

## 18:08 ~ 18:10 — Phase 0 완료, Phase 1 시작

### 작업 내용
- PHASES.md: Phase 0 → 완료 ✅, Phase 1 → 진행중
- .gitignore 추가 (build/, DerivedData/, .DS_Store 등)

---

## 18:12 — Phase 1 Step 1.1: ContentType enum 정의

### 요청사항
- 6가지 콘텐츠 유형 enum 정의

### 작업 내용
- ContentType enum 생성: youtube, instagram, naverMap, googleMap, coupang, web
- Xcode 프로젝트에 등록

### 변경 통계
```
 Stash/Domain/Models/ContentType.swift | 10 ++++++++++
```

---

## 18:13 — Phase 1 Step 1.2: SavedContent 도메인 모델 정의

### 요청사항
- 핵심 도메인 모델 struct 정의

### 작업 내용
- SavedContent struct: id, title, url, contentType, createdAt, thumbnailURL, summary, metadata
- Xcode 프로젝트에 등록

### 변경 통계
```
 Stash/Domain/Models/SavedContent.swift | 12 ++++++++++++
```

---

## 18:15 — Phase 1 Step 1.3: SavedContent mock 헬퍼

### 요청사항
- 테스트/프리뷰용 mock 인스턴스 생성

### 작업 내용
- SavedContent+Mock.swift: 6개 ContentType별 mock 데이터
- StashTests에서 mock 생성 테스트 통과

### 변경 통계
```
 Stash/Domain/Models/SavedContent+Mock.swift | 69 ++++++++++++++++++++
 StashTests/StashTests.swift                 | 56 ++++++++++++++++
 3 files changed, 126 insertions(+), 3 deletions(-)
```

---

## 18:23 — Phase 1 Step 1.4: URL → ContentType 판별 로직

### 요청사항
- URL 도메인 기반 ContentType 자동 판별

### 작업 내용
- ContentTypeParser.swift: URL host 패턴 매칭으로 ContentType 판별
- ContentTypeParserTests.swift: 16개 테스트 (YouTube, Instagram, 네이버지도, 구글맵, 쿠팡, 일반 웹)

### 변경 통계
```
 Stash/Domain/ContentParsing/ContentTypeParser.swift  |  35 +++++++
 StashTests/Domain/ContentTypeParserTests.swift       | 110 +++++++++++++++
 3 files changed, 161 insertions(+)
```

---

## 18:24 — Phase 1 Step 1.5: SDContent SwiftData 모델

### 요청사항
- SwiftData @Model 기반 영속 모델 정의

### 작업 내용
- SDContent.swift: @Model 클래스 (SavedContent와 동일 필드 + SwiftData 속성)

### 변경 통계
```
 Stash/Data/SwiftData/SDContent.swift | 34 ++++++++++++++++++++++++++++
```

---

## 18:25 ~ 18:26 — Phase 1 Step 1.7: ContentClient Protocol 정의

### 요청사항
- TCA DependencyKey 기반 Client Protocol

### 작업 내용
- ContentClient struct: save, fetch, delete 함수
- DependencyKey 등록, testValue mock 정의

### 변경 통계
```
 Stash/Domain/Services/ContentClient.swift | 29 +++++++++++++++++++++++
```

---

## 18:27 — Phase 1 Step 1.6: SDContent ↔ SavedContent 매퍼

### 요청사항
- SwiftData 모델과 도메인 모델 간 양방향 변환

### 작업 내용
- ContentMapper.swift: toDomain(), toSDContent() 변환 함수

### 변경 통계
```
 Stash/Data/Mappers/ContentMapper.swift | 45 +++++++++++++++++++++++++++
```

---

## 18:31 — Phase 1 Step 1.6 QA: 매퍼 테스트

### 요청사항
- SDContent ↔ SavedContent 매퍼 검증

### 작업 내용
- ContentMapperTests.swift: 5개 양방향 변환 테스트

### 변경 통계
```
 StashTests/Data/ContentMapperTests.swift | 123 +++++++++++++++++++++++++
```

---

## 18:32 — Phase 1 Step 1.8: ContentClient liveValue 구현

### 요청사항
- SwiftData + App Group 기반 실제 저장소 구현

### 작업 내용
- ContentClientLive.swift: ModelActor 기반 save/fetchAll/delete 구현
- ContentClient.swift에 liveValue 연결 (App Group container 경로 사용)

### 변경 통계
```
 Stash/Data/Clients/ContentClientLive.swift | 39 +++++++++++++++++++++
 Stash/Domain/Services/ContentClient.swift  | 14 ++++----
 3 files changed, 52 insertions(+), 5 deletions(-)
```

---

## 18:35 ~ 18:43 — 테스트 빌드 링커 에러 수정

### 요청사항
- StashTests 타겟 빌드 시 Dependencies 프레임워크 링커 에러 해결

### 작업 내용
- ENABLE_TESTING_SEARCH_PATHS = YES 추가
- -ObjC 링커 플래그 추가
- StashTests에서 ComposableArchitecture 직접 의존 제거
- ContentClient.swift: `import ComposableArchitecture` → `import Dependencies`로 변경

### 변경 통계
```
 Stash.xcodeproj/project.pbxproj          | 여러 차례 수정
 Stash/Domain/Services/ContentClient.swift | 2 +-
```

---

## 18:44 ~ 18:46 — Phase 1 완료, Phase 2 시작

### 작업 내용
- PHASES.md: Phase 0, Phase 1 → 완료 ✅, Phase 2 → 진행중

---

## 18:53 — Phase 2 Step 2.1~2.4: HomeFeature 기본 구조

### 요청사항
- AppFeature Reducer 생성 + HomeFeature State/Action/필터/콘텐츠 로드

### 작업 내용
- AppFeature.swift: 루트 @Reducer (HomeFeature Scope 연결)
- HomeFeature.swift: State (contents, filteredContents, selectedFilter, isLoading), ContentFilter enum (6종), Actions (onAppear, filterTapped, contentsLoaded, contentsLoadFailed)
- contentClient.fetch() 기반 콘텐츠 로드 Effect

### 변경 통계
```
 Stash/Features/Home/HomeFeature.swift | 85 ++++++++++++++++++++++
 Stash.xcodeproj/project.pbxproj      | 55 ++++++++++++++
```

---

## 18:55 ~ 18:58 — Phase 2 QA: HomeFeature 테스트

### 요청사항
- HomeFeature Reducer 동작 검증

### 작업 내용
- HomeFeatureTests.swift: TCA TestStore 기반 8개 테스트
  - onAppear 콘텐츠 로드, 필터 변경, 로딩 상태, 에러 처리 등
- AppFeature 연결 구조 업데이트

### 변경 통계
```
 StashTests/Features/HomeFeatureTests.swift | 159 +++++++++++++++++++++++
```

---

## 19:08 — Phase 2 빌드 수정: 테스트 링커 에러 근본 해결

### 작업 내용
- StashTests에서 TCA 직접 의존 완전 제거
- transitive SPM 패키지 참조 정리

### 변경 통계
```
 Stash.xcodeproj/project.pbxproj      | 78 -----------------------------------
 Stash/Features/Home/HomeFeature.swift |  6 +--
```

---

## 19:11 — Phase 2 Step 2.6: HomeView 필터 칩 UI

### 요청사항
- 필터 칩 가로 스크롤 UI

### 작업 내용
- HomeView.swift: NavigationStack + 가로 ScrollView 필터 칩 (전체/영상/장소/쇼핑/아티클/인스타)

### 변경 통계
```
 Stash/Features/Home/HomeView.swift | 78 ++++++++++++++++++++++++++++++++
```

---

## 19:17 — Phase 2 Step 2.7: HomeView 카드 그리드 UI

### 요청사항
- 2열 카드 그리드 레이아웃

### 작업 내용
- HomeView.swift: LazyVGrid 2열 그리드, Store 연결, 로딩/빈 상태 UI

### 변경 통계
```
 Stash/Features/Home/HomeView.swift | 75 +++++++++++++++++++++++++++++++++
```

---

## 19:21 — Phase 2 Step 2.8: ContentCardView 기본 카드

### 요청사항
- 웹 콘텐츠용 기본 카드 컴포넌트

### 작업 내용
- ContentCardView.swift: AsyncImage 썸네일(CardThumbnail) + 제목(2줄) + 도메인 표시
- HomeView에서 카드 컴포넌트 분리

### 변경 통계
```
 Stash/Features/Home/ContentCardView.swift | 104 +++++++++++++++++++++
 Stash/Features/Home/HomeView.swift        |  29 ------
```

---

## 19:23 — Phase 2 Step 2.9: ContentCardView 소스별 분기

### 요청사항
- ContentType별 카드 레이아웃 분기

### 작업 내용
- YouTubeCardView: 16:9 + 채널명 + 재생시간
- InstagramCardView: 1:1 + @username + 캡션
- PlaceCardView: 4:3 + 주소 + 지도앱 아이콘
- ShoppingCardView: 1:1 + 가격 (빨간 bold)
- WebCardView: 16:9 기본 카드
- #Preview 7개 작성

### 변경 통계
```
 Stash/Features/Home/ContentCardView.swift | 242 +++++++++++++++++++++++-----
 1 file changed, 204 insertions(+), 38 deletions(-)
```

---

## 19:26 — Phase 2 Step 2.1~2.2: AppFeature + StashApp 진입점 정리

### 요청사항
- AppFeature → HomeFeature Scope 연결, StashApp 진입점 완성

### 작업 내용
- AppFeature.swift: @Reducer로 HomeFeature Scope 구성
- StashApp.swift: @main에서 Store 생성, HomeView로 scoped

### 변경 통계
```
 Stash/App/AppFeature.swift | 19 +++++++++++++++++++
 Stash/App/StashApp.swift   |  7 ++++++-
```

---

## 19:27 — Phase 2 완료

### 작업 내용
- PHASES.md: Phase 2 → 완료 ✅
- 전체 QA: 36개 테스트 통과, 빌드 성공, Warning 0

---

## 19:35 — 미사용 파일 정리

### 요청사항
- StashApp이 HomeView로 직접 연결되어 ContentView.swift 불필요

### 작업 내용
- ContentView.swift 삭제
- pbxproj에서 참조 4곳 제거

### 변경 통계
```
 Stash.xcodeproj/project.pbxproj |  4 ----
 Stash/App/ContentView.swift     | 18 ------------------
 2 files changed, 22 deletions(-)
```
